<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <script>

        // 定义地球半径
        const R = 6371;

        // 75.03384883594173  Sacramento,CA,USA
        // 75.72769280275081  San Francisco, USA

        // 定义两个坐标点
        const point1 = { lat: 38.695085, lng: -121.590065 }; // Sacramento,CA,USA
        // const point1 = { lat: 37.621313, lng: -122.378955 }; // San Francisco, USA
        const point2 = { lat: 38.2985362, lng: -122.2876861 }; // napa

        // 定义一个函数将角度转换为弧度
        function toRadians(degrees) {
            return degrees * Math.PI / 180;
        }

        // 计算两点之间的纬度差和经度差（以弧度为单位）
        const deltaLat = toRadians(point2.lat - point1.lat);
        const deltaLng = toRadians(point2.lng - point1.lng);

        // 计算两点的纬度（以弧度为单位）
        const lat1 = toRadians(point1.lat);
        const lat2 = toRadians(point2.lat);

        // 应用大圆距离公式
        const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +
            Math.cos(lat1) * Math.cos(lat2) *
            Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        const d = R * c;

        // 输出结果（以千米为单位）
        console.log(d); // 1065.7657250061193


    </script>

</html>