<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <script>

        let isCircle = true

        let d = [{ "type": "polygon", "points": [{ "lng": 113.89048489404298, "lat": 22.41417921342334 }, { "lng": 113.98573946011187, "lat": 22.479484572766573 }, { "lng": 114.02684361082208, "lat": 22.50736821439385 }, { "lng": 114.05089547400014, "lat": 22.5064487665787 }, { "lng": 114.06524846938032, "lat": 22.517819343551558 }, { "lng": 114.07347639300423, "lat": 22.520848250610946 }, { "lng": 114.07861441184302, "lat": 22.530378187064823 }, { "lng": 114.08665885162021, "lat": 22.537545248013924 }, { "lng": 114.10511739300668, "lat": 22.534969708441064 }, { "lng": 114.1137912359068, "lat": 22.5319184482114 }, { "lng": 114.1243318962813, "lat": 22.53939122686276 }, { "lng": 114.13538754078665, "lat": 22.544802557222486 }, { "lng": 114.14593892999721, "lat": 22.545130495663877 }, { "lng": 114.15151213927612, "lat": 22.554019449956034 }, { "lng": 114.16351686471873, "lat": 22.56379055224951 }, { "lng": 114.27172622099943, "lat": 22.54746567793028 }, { "lng": 114.42456753528789, "lat": 22.49054188112998 }, { "lng": 114.37488066742422, "lat": 22.14522162542228 }, { "lng": 113.82531586987307, "lat": 22.196325187995058 }] }]

        let points = d[0]['points']
        console.log(points);

        let barriers = []

        //    {
        //     "a_lat": 21.19799017350279,
        //     "a_lng": -86.70880885787703,
        //     "a_cross": 0,
        //     "b_lat": 21.2318645888616,
        //     "b_lng": -86.74812558500743,
        //     "b_cross": 0
        // }

        let len = points.length

        for (let i = 0; i < len; i++) {
            let { lat: fromLat, lng: fromLng } = points[i]
            let j = i + 1

            let obj = {
                a_lat: fromLat,
                a_lng: fromLng,
                a_cross: 0,
            }

            let nextObj = points[j]
            if (nextObj) {
                let { lat: toLat, lng: toLng } = nextObj
                obj['b_lat'] = toLat
                obj['b_lng'] = toLng
                obj['b_cross'] = 0
            } else {
                if (isCircle) {
                    barriers.push(Object.assign({}, obj, {
                        b_lat: points[0].lat,
                        b_lng: points[0].lng,
                        b_cross: 0,
                    }))
                }
                continue
            }
            barriers.push(obj)
        }


        console.log(barriers);





        // 北京 广州 深圳 杭州 长沙 成都 南京 贵阳 香港
        // 上海 

        {
            id:56083
        },
        {
            id
        }

    </script>
</body>

</html>