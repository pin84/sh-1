<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <script>

        let data = [
            {
                "name": "Whistler",
                "lat": 50.1163196,
                "lng": -122.9573563,
                "radius": 10587,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 340,
                        "currency": "USD",
                        "p_amt": 340,
                        "d_amt": 340
                    }
                ],
                "p2p": "false",
                "pid": "15.4.1"
            },
            {
                "name": "Surrey",
                "lat": 49.17248344640038,
                "lng": -122.856221742912,
                "radius": 8000,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 65,
                        "currency": "USD",
                        "p_amt": 65,
                        "d_amt": 65
                    }
                ],
                "p2p": "false",
                "pid": "15.4.2"
            },
            {
                "name": "North vancouver",
                "lat": 49.323766343483584,
                "lng": -123.06249399305872,
                "radius": 3354,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 59,
                        "currency": "USD",
                        "p_amt": 59,
                        "d_amt": 59
                    }
                ],
                "p2p": "false",
                "pid": "15.4.3"
            },
            {
                "name": "West Vancouver",
                "lat": 49.33641094459144,
                "lng": -123.15090411209098,
                "radius": 3000,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 59,
                        "currency": "USD",
                        "p_amt": 59,
                        "d_amt": 59
                    }
                ],
                "p2p": "false",
                "pid": "15.4.4"
            },
            {
                "name": "Victoria",
                "lat": 48.44305342068352,
                "lng": -123.34132080470212,
                "radius": 4327,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 260,
                        "currency": "USD",
                        "p_amt": 260,
                        "d_amt": 260
                    }
                ],
                "p2p": "false",
                "pid": "15.4.5"
            },
            {
                "name": "Squamish",
                "lat": 49.7152177503738,
                "lng": -123.14186243741584,
                "radius": 4998,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 220,
                        "currency": "USD",
                        "p_amt": 220,
                        "d_amt": 220
                    }
                ],
                "p2p": "false",
                "pid": "15.4.6"
            },
            {
                "lat": 49.354749874046256,
                "lng": -123.26835862988699,
                "name": "Horseshoe Bay",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 65,
                        "d_amt": 70
                    }
                ],
                "radius": 3000,
                "pid": "15.4.7"
            },
            {
                "lat": 49.3982115993578,
                "lng": -123.1896528946446,
                "name": "Cypress Provincial Park",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 150,
                        "d_amt": 150
                    }
                ],
                "radius": 5000,
                "pid": "15.4.8"
            },
            {
                "lat": 49.16269385615635,
                "lng": -124.02959476367886,
                "name": "Nanaimo",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 2000,
                        "d_amt": 2000
                    }
                ],
                "radius": 30000,
                "pid": "15.4.9"
            },
            {
                "lat": 49.2591395,
                "lng": -123.159092,
                "name": "Vancouver",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 170,
                        "d_amt": 170
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.269011,
                        "lng": -123.268699
                    },
                    {
                        "lat": 49.274112,
                        "lng": -123.258345
                    },
                    {
                        "lat": 49.279213,
                        "lng": -123.247992
                    },
                    {
                        "lat": 49.278876,
                        "lng": -123.200167
                    },
                    {
                        "lat": 49.27854,
                        "lng": -123.152342
                    },
                    {
                        "lat": 49.288419,
                        "lng": -123.154858
                    },
                    {
                        "lat": 49.298298,
                        "lng": -123.157374
                    },
                    {
                        "lat": 49.303367,
                        "lng": -123.156109
                    },
                    {
                        "lat": 49.308436,
                        "lng": -123.154843
                    },
                    {
                        "lat": 49.31024,
                        "lng": -123.14857
                    },
                    {
                        "lat": 49.312043,
                        "lng": -123.142296
                    },
                    {
                        "lat": 49.305959,
                        "lng": -123.128513
                    },
                    {
                        "lat": 49.299875,
                        "lng": -123.11473
                    },
                    {
                        "lat": 49.299012,
                        "lng": -123.11576
                    },
                    {
                        "lat": 49.298148,
                        "lng": -123.11679
                    },
                    {
                        "lat": 49.297093,
                        "lng": -123.122455
                    },
                    {
                        "lat": 49.296037,
                        "lng": -123.12812
                    },
                    {
                        "lat": 49.295706,
                        "lng": -123.131376
                    },
                    {
                        "lat": 49.295374,
                        "lng": -123.134631
                    },
                    {
                        "lat": 49.293413,
                        "lng": -123.128879
                    },
                    {
                        "lat": 49.291452,
                        "lng": -123.123127
                    },
                    {
                        "lat": 49.290815,
                        "lng": -123.121977
                    },
                    {
                        "lat": 49.290178,
                        "lng": -123.120826
                    },
                    {
                        "lat": 49.290063,
                        "lng": -123.119817
                    },
                    {
                        "lat": 49.289948,
                        "lng": -123.118807
                    },
                    {
                        "lat": 49.289137,
                        "lng": -123.118474
                    },
                    {
                        "lat": 49.288325,
                        "lng": -123.118142
                    },
                    {
                        "lat": 49.288014,
                        "lng": -123.117136
                    },
                    {
                        "lat": 49.287704,
                        "lng": -123.116131
                    },
                    {
                        "lat": 49.287164,
                        "lng": -123.114304
                    },
                    {
                        "lat": 49.286623,
                        "lng": -123.112476
                    },
                    {
                        "lat": 49.28607,
                        "lng": -123.110653
                    },
                    {
                        "lat": 49.285517,
                        "lng": -123.10883
                    },
                    {
                        "lat": 49.285239,
                        "lng": -123.107883
                    },
                    {
                        "lat": 49.284962,
                        "lng": -123.106936
                    },
                    {
                        "lat": 49.284758,
                        "lng": -123.108475
                    },
                    {
                        "lat": 49.284554,
                        "lng": -123.110014
                    },
                    {
                        "lat": 49.286932,
                        "lng": -123.090931
                    },
                    {
                        "lat": 49.289311,
                        "lng": -123.071848
                    },
                    {
                        "lat": 49.286846,
                        "lng": -123.071143
                    },
                    {
                        "lat": 49.284381,
                        "lng": -123.070438
                    },
                    {
                        "lat": 49.281832,
                        "lng": -123.07236
                    },
                    {
                        "lat": 49.279283,
                        "lng": -123.074282
                    },
                    {
                        "lat": 49.276266,
                        "lng": -123.074371
                    },
                    {
                        "lat": 49.273249,
                        "lng": -123.074461
                    },
                    {
                        "lat": 49.270115,
                        "lng": -123.072411
                    },
                    {
                        "lat": 49.26698,
                        "lng": -123.070362
                    },
                    {
                        "lat": 49.265517,
                        "lng": -123.067928
                    },
                    {
                        "lat": 49.264055,
                        "lng": -123.065494
                    },
                    {
                        "lat": 49.262897,
                        "lng": -123.059832
                    },
                    {
                        "lat": 49.261739,
                        "lng": -123.054169
                    },
                    {
                        "lat": 49.257467,
                        "lng": -123.057609
                    },
                    {
                        "lat": 49.253194,
                        "lng": -123.061049
                    },
                    {
                        "lat": 49.246896,
                        "lng": -123.063644
                    },
                    {
                        "lat": 49.240598,
                        "lng": -123.066239
                    },
                    {
                        "lat": 49.232921,
                        "lng": -123.065652
                    },
                    {
                        "lat": 49.225244,
                        "lng": -123.065064
                    },
                    {
                        "lat": 49.21574,
                        "lng": -123.057274
                    },
                    {
                        "lat": 49.206236,
                        "lng": -123.049485
                    },
                    {
                        "lat": 49.206486,
                        "lng": -123.073206
                    },
                    {
                        "lat": 49.206735,
                        "lng": -123.096926
                    },
                    {
                        "lat": 49.209328,
                        "lng": -123.111916
                    },
                    {
                        "lat": 49.21192,
                        "lng": -123.126907
                    },
                    {
                        "lat": 49.211056,
                        "lng": -123.143514
                    },
                    {
                        "lat": 49.210192,
                        "lng": -123.160121
                    },
                    {
                        "lat": 49.214944,
                        "lng": -123.177669
                    },
                    {
                        "lat": 49.219696,
                        "lng": -123.195216
                    },
                    {
                        "lat": 49.227182,
                        "lng": -123.20859
                    },
                    {
                        "lat": 49.234668,
                        "lng": -123.221964
                    },
                    {
                        "lat": 49.244934,
                        "lng": -123.240335
                    },
                    {
                        "lat": 49.2552,
                        "lng": -123.258705
                    },
                    {
                        "lat": 49.262105,
                        "lng": -123.263702
                    }
                ],
                "pid": "15.4.10"
            },
            {
                "lat": 49.165666,
                "lng": -123.1319435,
                "name": "Richmond",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 70,
                        "d_amt": 70
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.221463,
                        "lng": -123.211548
                    },
                    {
                        "lat": 49.220033,
                        "lng": -123.202282
                    },
                    {
                        "lat": 49.218602,
                        "lng": -123.193016
                    },
                    {
                        "lat": 49.215301,
                        "lng": -123.181054
                    },
                    {
                        "lat": 49.211999,
                        "lng": -123.169093
                    },
                    {
                        "lat": 49.210678,
                        "lng": -123.164207
                    },
                    {
                        "lat": 49.209357,
                        "lng": -123.159321
                    },
                    {
                        "lat": 49.209798,
                        "lng": -123.154267
                    },
                    {
                        "lat": 49.210238,
                        "lng": -123.149212
                    },
                    {
                        "lat": 49.211118,
                        "lng": -123.13843
                    },
                    {
                        "lat": 49.211999,
                        "lng": -123.127648
                    },
                    {
                        "lat": 49.209027,
                        "lng": -123.109115
                    },
                    {
                        "lat": 49.206055,
                        "lng": -123.090583
                    },
                    {
                        "lat": 49.20643,
                        "lng": -123.069776
                    },
                    {
                        "lat": 49.206804,
                        "lng": -123.048969
                    },
                    {
                        "lat": 49.19227,
                        "lng": -123.052507
                    },
                    {
                        "lat": 49.177737,
                        "lng": -123.056045
                    },
                    {
                        "lat": 49.156361,
                        "lng": -123.057562
                    },
                    {
                        "lat": 49.134986,
                        "lng": -123.059078
                    },
                    {
                        "lat": 49.130907,
                        "lng": -123.065817
                    },
                    {
                        "lat": 49.126828,
                        "lng": -123.072556
                    },
                    {
                        "lat": 49.123829,
                        "lng": -123.080356
                    },
                    {
                        "lat": 49.12083,
                        "lng": -123.088157
                    },
                    {
                        "lat": 49.116453,
                        "lng": -123.102292
                    },
                    {
                        "lat": 49.112075,
                        "lng": -123.116427
                    },
                    {
                        "lat": 49.110972,
                        "lng": -123.123671
                    },
                    {
                        "lat": 49.109869,
                        "lng": -123.130916
                    },
                    {
                        "lat": 49.109946,
                        "lng": -123.137335
                    },
                    {
                        "lat": 49.110024,
                        "lng": -123.143754
                    },
                    {
                        "lat": 49.117853,
                        "lng": -123.170878
                    },
                    {
                        "lat": 49.125682,
                        "lng": -123.198003
                    },
                    {
                        "lat": 49.165538,
                        "lng": -123.20646
                    },
                    {
                        "lat": 49.205395,
                        "lng": -123.214918
                    },
                    {
                        "lat": 49.213429,
                        "lng": -123.213233
                    }
                ],
                "pid": "15.4.11"
            },
            {
                "lat": 49.062981,
                "lng": -123.0416965,
                "name": "Delta",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 100,
                        "d_amt": 100
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.106283,
                        "lng": -123.190881
                    },
                    {
                        "lat": 49.108493,
                        "lng": -123.187402
                    },
                    {
                        "lat": 49.110704,
                        "lng": -123.183922
                    },
                    {
                        "lat": 49.109014,
                        "lng": -123.151074
                    },
                    {
                        "lat": 49.107325,
                        "lng": -123.118226
                    },
                    {
                        "lat": 49.127592,
                        "lng": -123.072708
                    },
                    {
                        "lat": 49.147858,
                        "lng": -123.02719
                    },
                    {
                        "lat": 49.15177,
                        "lng": -122.996231
                    },
                    {
                        "lat": 49.155682,
                        "lng": -122.965273
                    },
                    {
                        "lat": 49.149372,
                        "lng": -122.961268
                    },
                    {
                        "lat": 49.143062,
                        "lng": -122.957264
                    },
                    {
                        "lat": 49.139115,
                        "lng": -122.953751
                    },
                    {
                        "lat": 49.135168,
                        "lng": -122.950239
                    },
                    {
                        "lat": 49.131357,
                        "lng": -122.94669
                    },
                    {
                        "lat": 49.127546,
                        "lng": -122.94314
                    },
                    {
                        "lat": 49.12302,
                        "lng": -122.936406
                    },
                    {
                        "lat": 49.118493,
                        "lng": -122.929672
                    },
                    {
                        "lat": 49.114445,
                        "lng": -122.92165
                    },
                    {
                        "lat": 49.110397,
                        "lng": -122.913629
                    },
                    {
                        "lat": 49.108554,
                        "lng": -122.907763
                    },
                    {
                        "lat": 49.10671,
                        "lng": -122.901898
                    },
                    {
                        "lat": 49.098722,
                        "lng": -122.897205
                    },
                    {
                        "lat": 49.090733,
                        "lng": -122.892512
                    },
                    {
                        "lat": 49.081666,
                        "lng": -122.914333
                    },
                    {
                        "lat": 49.072599,
                        "lng": -122.936153
                    },
                    {
                        "lat": 49.068756,
                        "lng": -122.959616
                    },
                    {
                        "lat": 49.064913,
                        "lng": -122.983079
                    },
                    {
                        "lat": 49.04589,
                        "lng": -123.017406
                    },
                    {
                        "lat": 49.026866,
                        "lng": -123.051732
                    },
                    {
                        "lat": 49.000421,
                        "lng": -123.036833
                    },
                    {
                        "lat": 48.973976,
                        "lng": -123.021934
                    },
                    {
                        "lat": 48.972128,
                        "lng": -123.05314
                    },
                    {
                        "lat": 48.97028,
                        "lng": -123.084345
                    },
                    {
                        "lat": 48.996465,
                        "lng": -123.093658
                    },
                    {
                        "lat": 49.022651,
                        "lng": -123.10297
                    },
                    {
                        "lat": 49.017504,
                        "lng": -123.110114
                    },
                    {
                        "lat": 49.012357,
                        "lng": -123.117259
                    },
                    {
                        "lat": 49.009516,
                        "lng": -123.122241
                    },
                    {
                        "lat": 49.006675,
                        "lng": -123.127224
                    },
                    {
                        "lat": 49.00527,
                        "lng": -123.130065
                    },
                    {
                        "lat": 49.003865,
                        "lng": -123.132905
                    },
                    {
                        "lat": 49.004995,
                        "lng": -123.134069
                    },
                    {
                        "lat": 49.006126,
                        "lng": -123.135234
                    },
                    {
                        "lat": 49.011684,
                        "lng": -123.127177
                    },
                    {
                        "lat": 49.017243,
                        "lng": -123.119121
                    },
                    {
                        "lat": 49.022584,
                        "lng": -123.1102
                    },
                    {
                        "lat": 49.027924,
                        "lng": -123.101278
                    },
                    {
                        "lat": 49.03799,
                        "lng": -123.112963
                    },
                    {
                        "lat": 49.048055,
                        "lng": -123.124648
                    },
                    {
                        "lat": 49.037002,
                        "lng": -123.132315
                    },
                    {
                        "lat": 49.025949,
                        "lng": -123.139982
                    },
                    {
                        "lat": 49.019185,
                        "lng": -123.148789
                    },
                    {
                        "lat": 49.012422,
                        "lng": -123.157596
                    },
                    {
                        "lat": 49.01493,
                        "lng": -123.165013
                    },
                    {
                        "lat": 49.017438,
                        "lng": -123.172429
                    },
                    {
                        "lat": 49.025872,
                        "lng": -123.165824
                    },
                    {
                        "lat": 49.034306,
                        "lng": -123.159219
                    },
                    {
                        "lat": 49.042608,
                        "lng": -123.143676
                    },
                    {
                        "lat": 49.050911,
                        "lng": -123.128134
                    },
                    {
                        "lat": 49.059191,
                        "lng": -123.145128
                    },
                    {
                        "lat": 49.067472,
                        "lng": -123.162122
                    },
                    {
                        "lat": 49.086877,
                        "lng": -123.176502
                    }
                ],
                "pid": "15.4.12"
            },
            {
                "lat": 49.2728975,
                "lng": -122.82539,
                "name": "coquitlam",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 90,
                        "d_amt": 90
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.292833,
                        "lng": -122.916697
                    },
                    {
                        "lat": 49.306393,
                        "lng": -122.854811
                    },
                    {
                        "lat": 49.319954,
                        "lng": -122.792925
                    },
                    {
                        "lat": 49.308709,
                        "lng": -122.763504
                    },
                    {
                        "lat": 49.297464,
                        "lng": -122.734083
                    },
                    {
                        "lat": 49.272331,
                        "lng": -122.736167
                    },
                    {
                        "lat": 49.247197,
                        "lng": -122.73825
                    },
                    {
                        "lat": 49.236519,
                        "lng": -122.759578
                    },
                    {
                        "lat": 49.225841,
                        "lng": -122.780906
                    },
                    {
                        "lat": 49.230625,
                        "lng": -122.79155
                    },
                    {
                        "lat": 49.235409,
                        "lng": -122.802195
                    },
                    {
                        "lat": 49.238281,
                        "lng": -122.81195
                    },
                    {
                        "lat": 49.241154,
                        "lng": -122.821705
                    },
                    {
                        "lat": 49.242777,
                        "lng": -122.833517
                    },
                    {
                        "lat": 49.2444,
                        "lng": -122.845328
                    },
                    {
                        "lat": 49.244494,
                        "lng": -122.851545
                    },
                    {
                        "lat": 49.244588,
                        "lng": -122.857761
                    },
                    {
                        "lat": 49.244369,
                        "lng": -122.863739
                    },
                    {
                        "lat": 49.244151,
                        "lng": -122.869716
                    },
                    {
                        "lat": 49.243433,
                        "lng": -122.875454
                    },
                    {
                        "lat": 49.242715,
                        "lng": -122.881193
                    },
                    {
                        "lat": 49.241657,
                        "lng": -122.887113
                    },
                    {
                        "lat": 49.2406,
                        "lng": -122.893033
                    },
                    {
                        "lat": 49.237288,
                        "lng": -122.904827
                    },
                    {
                        "lat": 49.233976,
                        "lng": -122.916621
                    },
                    {
                        "lat": 49.263404,
                        "lng": -122.916659
                    }
                ],
                "pid": "15.4.13"
            },
            {
                "lat": 49.278,
                "lng": -123.04869049999999,
                "name": "Atrium inn",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 70,
                        "d_amt": 70
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.273264,
                        "lng": -123.073916
                    },
                    {
                        "lat": 49.276346,
                        "lng": -123.073812
                    },
                    {
                        "lat": 49.279427,
                        "lng": -123.073709
                    },
                    {
                        "lat": 49.282001,
                        "lng": -123.071754
                    },
                    {
                        "lat": 49.284575,
                        "lng": -123.0698
                    },
                    {
                        "lat": 49.287033,
                        "lng": -123.070401
                    },
                    {
                        "lat": 49.289491,
                        "lng": -123.071001
                    },
                    {
                        "lat": 49.290204,
                        "lng": -123.065103
                    },
                    {
                        "lat": 49.290916,
                        "lng": -123.059205
                    },
                    {
                        "lat": 49.292442,
                        "lng": -123.053657
                    },
                    {
                        "lat": 49.293968,
                        "lng": -123.04811
                    },
                    {
                        "lat": 49.293582,
                        "lng": -123.035787
                    },
                    {
                        "lat": 49.293196,
                        "lng": -123.023465
                    },
                    {
                        "lat": 49.284074,
                        "lng": -123.023614
                    },
                    {
                        "lat": 49.274953,
                        "lng": -123.023763
                    },
                    {
                        "lat": 49.272255,
                        "lng": -123.023713
                    },
                    {
                        "lat": 49.269557,
                        "lng": -123.023663
                    },
                    {
                        "lat": 49.266825,
                        "lng": -123.023761
                    },
                    {
                        "lat": 49.264092,
                        "lng": -123.023859
                    },
                    {
                        "lat": 49.263154,
                        "lng": -123.026085
                    },
                    {
                        "lat": 49.262216,
                        "lng": -123.028311
                    },
                    {
                        "lat": 49.262147,
                        "lng": -123.031449
                    },
                    {
                        "lat": 49.262078,
                        "lng": -123.034586
                    },
                    {
                        "lat": 49.262078,
                        "lng": -123.037843
                    },
                    {
                        "lat": 49.262078,
                        "lng": -123.0411
                    },
                    {
                        "lat": 49.262055,
                        "lng": -123.047566
                    },
                    {
                        "lat": 49.262032,
                        "lng": -123.054033
                    },
                    {
                        "lat": 49.263142,
                        "lng": -123.059517
                    },
                    {
                        "lat": 49.264252,
                        "lng": -123.065002
                    },
                    {
                        "lat": 49.265706,
                        "lng": -123.067402
                    },
                    {
                        "lat": 49.26716,
                        "lng": -123.069802
                    },
                    {
                        "lat": 49.26871,
                        "lng": -123.070806
                    },
                    {
                        "lat": 49.27026,
                        "lng": -123.07181
                    },
                    {
                        "lat": 49.271059,
                        "lng": -123.072349
                    },
                    {
                        "lat": 49.271858,
                        "lng": -123.072888
                    },
                    {
                        "lat": 49.272971,
                        "lng": -123.073572
                    }
                ],
                "pid": "15.4.14"
            },
            {
                "lat": 49.2876915,
                "lng": -123.110759,
                "name": "Cruise Terminal",
                "p2p": "false",
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 100000,
                        "d_amt": 100000
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.288248,
                        "lng": -123.118026
                    },
                    {
                        "lat": 49.289089,
                        "lng": -123.118373
                    },
                    {
                        "lat": 49.289929,
                        "lng": -123.11872
                    },
                    {
                        "lat": 49.290099,
                        "lng": -123.118431
                    },
                    {
                        "lat": 49.290268,
                        "lng": -123.118142
                    },
                    {
                        "lat": 49.290334,
                        "lng": -123.117867
                    },
                    {
                        "lat": 49.290401,
                        "lng": -123.117592
                    },
                    {
                        "lat": 49.290118,
                        "lng": -123.112089
                    },
                    {
                        "lat": 49.289835,
                        "lng": -123.106586
                    },
                    {
                        "lat": 49.287618,
                        "lng": -123.104692
                    },
                    {
                        "lat": 49.2854,
                        "lng": -123.102798
                    },
                    {
                        "lat": 49.285191,
                        "lng": -123.10484
                    },
                    {
                        "lat": 49.284982,
                        "lng": -123.106883
                    },
                    {
                        "lat": 49.285654,
                        "lng": -123.109183
                    },
                    {
                        "lat": 49.286325,
                        "lng": -123.111484
                    },
                    {
                        "lat": 49.286616,
                        "lng": -123.112416
                    },
                    {
                        "lat": 49.286907,
                        "lng": -123.113347
                    },
                    {
                        "lat": 49.287399,
                        "lng": -123.115006
                    },
                    {
                        "lat": 49.28789,
                        "lng": -123.116666
                    },
                    {
                        "lat": 49.288069,
                        "lng": -123.117346
                    }
                ],
                "pid": "15.4.15"
            },
            {
                "lat": 49.216412500000004,
                "lng": -122.990733,
                "name": "Burnaby",
                "p2p": false,
                "prices": [
                    {
                        "airport": "YVR",
                        "amount": 70,
                        "currency": "USD",
                        "p_amt": 150,
                        "d_amt": 150
                    }
                ],
                "polygons": [
                    {
                        "lat": 49.137796,
                        "lng": -123.058284
                    },
                    {
                        "lat": 49.149869,
                        "lng": -123.057308
                    },
                    {
                        "lat": 49.161941,
                        "lng": -123.056332
                    },
                    {
                        "lat": 49.174125,
                        "lng": -123.055622
                    },
                    {
                        "lat": 49.186654,
                        "lng": -123.05296
                    },
                    {
                        "lat": 49.196918,
                        "lng": -123.0506
                    },
                    {
                        "lat": 49.207181,
                        "lng": -123.048239
                    },
                    {
                        "lat": 49.211703,
                        "lng": -123.052587
                    },
                    {
                        "lat": 49.216224,
                        "lng": -123.056936
                    },
                    {
                        "lat": 49.221672,
                        "lng": -123.06155
                    },
                    {
                        "lat": 49.227372,
                        "lng": -123.064079
                    },
                    {
                        "lat": 49.23143,
                        "lng": -123.064465
                    },
                    {
                        "lat": 49.235487,
                        "lng": -123.064851
                    },
                    {
                        "lat": 49.239901,
                        "lng": -123.064191
                    },
                    {
                        "lat": 49.244314,
                        "lng": -123.063531
                    },
                    {
                        "lat": 49.246237,
                        "lng": -123.063092
                    },
                    {
                        "lat": 49.24816,
                        "lng": -123.062653
                    },
                    {
                        "lat": 49.249671,
                        "lng": -123.06219
                    },
                    {
                        "lat": 49.251181,
                        "lng": -123.061727
                    },
                    {
                        "lat": 49.252631,
                        "lng": -123.061027
                    },
                    {
                        "lat": 49.254081,
                        "lng": -123.060327
                    },
                    {
                        "lat": 49.255456,
                        "lng": -123.059045
                    },
                    {
                        "lat": 49.256832,
                        "lng": -123.057762
                    },
                    {
                        "lat": 49.259152,
                        "lng": -123.055902
                    },
                    {
                        "lat": 49.261472,
                        "lng": -123.054043
                    },
                    {
                        "lat": 49.261711,
                        "lng": -123.038826
                    },
                    {
                        "lat": 49.26195,
                        "lng": -123.02361
                    },
                    {
                        "lat": 49.266887,
                        "lng": -123.022495
                    },
                    {
                        "lat": 49.271824,
                        "lng": -123.021381
                    },
                    {
                        "lat": 49.282262,
                        "lng": -123.021948
                    },
                    {
                        "lat": 49.2927,
                        "lng": -123.022515
                    },
                    {
                        "lat": 49.291107,
                        "lng": -123.011147
                    },
                    {
                        "lat": 49.289514,
                        "lng": -122.999779
                    },
                    {
                        "lat": 49.295029,
                        "lng": -122.987378
                    },
                    {
                        "lat": 49.288656,
                        "lng": -122.974037
                    },
                    {
                        "lat": 49.291401,
                        "lng": -122.932022
                    },
                    {
                        "lat": 49.288215,
                        "lng": -122.916615
                    },
                    {
                        "lat": 49.260921,
                        "lng": -122.916884
                    },
                    {
                        "lat": 49.233627,
                        "lng": -122.917153
                    },
                    {
                        "lat": 49.169122,
                        "lng": -122.968893
                    }
                ],
                "pid": "15.4.16"
            }
        ]




        console.log('-----');

        // 判断两条线段是否相交
        function isIntersect(p1, q1, p2, q2) {
            // 辅助函数：计算向量 (p, q) 和 (r, s) 的叉积
            function crossProduct(p, q, r) {
                return (q.lat - p.lat) * (r.lng - p.lng) - (q.lng - p.lng) * (r.lat - p.lat);
            }

            // 检查 (p1, q1) 和 (p2, q2) 是否相交
            const d1 = crossProduct(p2, q2, p1);
            const d2 = crossProduct(p2, q2, q1);
            const d3 = crossProduct(p1, q1, p2);
            const d4 = crossProduct(p1, q1, q2);

            // 检查是否跨越
            if ((d1 * d2 < 0) && (d3 * d4 < 0)) {
                return true;
            }

            // 检查是否共线重叠
            function isOnSegment(p, q, r) {
                return Math.min(p.lat, q.lat) <= r.lat && r.lat <= Math.max(p.lat, q.lat) &&
                    Math.min(p.lng, q.lng) <= r.lng && r.lng <= Math.max(p.lng, q.lng);
            }

            if (d1 === 0 && isOnSegment(p2, q2, p1)) return true;
            if (d2 === 0 && isOnSegment(p2, q2, q1)) return true;
            if (d3 === 0 && isOnSegment(p1, q1, p2)) return true;
            if (d4 === 0 && isOnSegment(p1, q1, q2)) return true;

            return false;
        }

        // 判断多边形是否有相交的边
        function hasSelfIntersect(polygon) {
            const n = polygon.length;
            for (let i = 0; i < n; i++) {
                const p1 = polygon[i];
                const q1 = polygon[(i + 1) % n];
                for (let j = i + 1; j < n; j++) {
                    const p2 = polygon[j];
                    const q2 = polygon[(j + 1) % n];
                    // 忽略相邻边的相交
                    if (Math.abs(i - j) === 1 || (i === 0 && j === n - 1) || (i === n - 1 && j === 0)) {
                        continue;
                    }
                    if (isIntersect(p1, q1, p2, q2)) {
                        return true;
                    }
                }
            }
            return false;
        }

        function checker() {
            let ids = []
            for (let item of data) {
                let { from_place_lat_lng, to_place_lat_lng, id, polygons } = item
                // let from = JSON.parse(from_place_lat_lng)
                // let to = JSON.parse(to_place_lat_lng)
                // let fPolygons = from.polygons || undefined
                // let tPolygons = to.polygons || undefined
                // if (fPolygons) {
                //     let flag = hasSelfIntersect(fPolygons)
                //     if (flag) {
                //         ids.push(id)
                //     }
                // }
                // if (tPolygons) {
                //     let flag = hasSelfIntersect(tPolygons)
                //     if (flag) {
                //         ids.push(id)
                //     }
                // }

                if (polygons) {
                    let flag = hasSelfIntersect(polygons)
                    debugger
                    if (flag) {
                        debugger
                    }
                }




            }
            console.log(ids);
        }

        checker()
        // console.log(hasSelfIntersect(dataHandler(polygon))); // 输出: true

    </script>
</body>

</html>