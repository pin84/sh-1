START RequestId: 36838aaf-0190-47c9-8d3e-198db56069b4 Version: $LATEST
2024-01-19 07:34:25,350 - elife_log - INFO - /var/task/lambda_ride_pricings_get.py
2024-01-19 07:34:25,351 - elife_log - INFO - {'resource': '/ride-pricings', 'path': '/ride-pricings', 'httpMethod': 'GET', 'headers': {'accept': 'application/json, text/javascript, */*; q=0.01', 'accept-encoding': 'gzip, deflate, br', 'accept-language': 'en-US,en;q=0.9', 'Host': 'j1j495o5pk.execute-api.us-east-2.amazonaws.com', 'origin': 'http://127.0.0.1:5500', 'referer': 'http://127.0.0.1:5500/', 'sec-ch-ua': '"Not_A Brand";v="8", "Chromium";v="120", "Google Chrome";v="120"', 'sec-ch-ua-mobile': '?0', 'sec-ch-ua-platform': '"macOS"', 'sec-fetch-dest': 'empty', 'sec-fetch-mode': 'cors', 'sec-fetch-site': 'cross-site', 'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36', 'X-Amzn-Trace-Id': 'Root=1-65aa2601-249c44a07a17ff3e7fb64a73', 'X-Forwarded-For': '103.151.172.93', 'X-Forwarded-Port': '443', 'X-Forwarded-Proto': 'https'}, 'multiValueHeaders': {'accept': ['application/json, text/javascript, */*; q=0.01'], 'accept-encoding': ['gzip, deflate, br'], 'accept-language': ['en-US,en;q=0.9'], 'Host': ['j1j495o5pk.execute-api.us-east-2.amazonaws.com'], 'origin': ['http://127.0.0.1:5500'], 'referer': ['http://127.0.0.1:5500/'], 'sec-ch-ua': ['"Not_A Brand";v="8", "Chromium";v="120", "Google Chrome";v="120"'], 'sec-ch-ua-mobile': ['?0'], 'sec-ch-ua-platform': ['"macOS"'], 'sec-fetch-dest': ['empty'], 'sec-fetch-mode': ['cors'], 'sec-fetch-site': ['cross-site'], 'User-Agent': ['Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'], 'X-Amzn-Trace-Id': ['Root=1-65aa2601-249c44a07a17ff3e7fb64a73'], 'X-Forwarded-For': ['103.151.172.93'], 'X-Forwarded-Port': ['443'], 'X-Forwarded-Proto': ['https']}, 'queryStringParameters': {'currency': 'USD', 'demand_fleet_id': '15', 'distance': '9749', 'from_lat': '24.402955', 'from_lng': '98.531538', 'ses': 'qSblzEMGhcLfO01w9Isyj54bcWDR3zvOWjiOMXwIleJMYLsopVoBBaks4ypshIxM...', 'to_lat': '24.4400799', 'to_lng': '98.56729999999999'}, 'multiValueQueryStringParameters': {'currency': ['USD'], 'demand_fleet_id': ['15'], 'distance': ['9749'], 'from_lat': ['24.402955'], 'from_lng': ['98.531538'], 'ses': ['qSblzEMGhcLfO01w9Isyj54bcWDR3zvOWjiOMXwIleJMYLsopVoBBaks4ypshIxM...'], 'to_lat': ['24.4400799'], 'to_lng': ['98.56729999999999']}, 'pathParameters': None, 'stageVariables': None, 'requestContext': {'resourceId': '0if7x0', 'resourcePath': '/ride-pricings', 'httpMethod': 'GET', 'extendedRequestId': 'RxrgQGjqCYcENUA=', 'requestTime': '19/Jan/2024:07:34:25 +0000', 'path': '/upncoming/ride-pricings', 'accountId': '064290855103', 'protocol': 'HTTP/1.1', 'stage': 'upncoming', 'domainPrefix': 'j1j495o5pk', 'requestTimeEpoch': 1705649665339, 'requestId': '2a0ecfca-7de8-466e-98c9-005569a41cba', 'identity': {'cognitoIdentityPoolId': None, 'accountId': None, 'cognitoIdentityId': None, 'caller': None, 'sourceIp': '103.151.172.93', 'principalOrgId': None, 'accessKey': None, 'cognitoAuthenticationType': None, 'cognitoAuthenticationProvider': None, 'userArn': None, 'userAgent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36', 'user': None}, 'domainName': 'j1j495o5pk.execute-api.us-east-2.amazonaws.com', 'deploymentId': 'i7wgl3', 'apiId': 'j1j495o5pk'}, 'body': None, 'isBase64Encoded': False}
2024-01-19 07:34:25,351 - elife_log - INFO - None
select login_session.login_session_hash, login_session.login_id, login_session.access, login.employee_id, login.fleet_emp_id, login.fleet_driver_id, login.agency_emp_id, login.partner_emp_id, login.affiliate_emp_id, login.corporate_emp_id, via.login_id as via_login_id from login_session inner join login on login.id=login_session.login_id left join login_session via on via.id = login_session.via_login_session_id where login_session.login_session_hash=%s;
Param: ('9899cf2086353bd658ceb9b5108bcc1e63a5fb011a33edc6bcf9c6676d82ee59',)
select fleet.id as fleet_id, fleet.lat, fleet.lng, fleet.radius, fleet.parent_fleet_id, parent_fleet.name as parent_fleet_name, fleet.service_area_pricing_id from fleet inner join fleet parent_fleet on parent_fleet.id=fleet.parent_fleet_id where fleet.lat < %s and fleet.lat > %s and fleet.lng < %s and fleet.lng > %s and fleet.id in ( select id from fleet where parent_fleet_id in ( select %s union select supply_fleet_id from fleet_supply_demand where demand_fleet_id=%s ) ); 
Param: (26.201613200982067, 22.60429679901793, 100.50040224601494, 96.56267375398505, 15, 15)
2024-01-19 07:34:25,366 - elife_log - INFO - function fleets_select_by_from_to takes 0.0017096996307373047 sec
2024-01-19 07:34:25,382 - elife_log - INFO - print fleet_ids_qry: 
2024-01-19 07:34:25,382 - elife_log - INFO - [{'fleet_id': 1080, 'lat': 24.668664, 'lng': 98.591347, 'radius': 60000, 'parent_fleet_id': 15, 'parent_fleet_name': 'Elife', 'service_area_pricing_id': 105365}]
select service_area_pricing.id as id, service_area_id, pricing, effective_at, expire_at, fleet.service_area_pricing_id as fleet_service_area_pricing_id from service_area_pricing inner join fleet on fleet.id=service_area_pricing.service_area_id where service_area_pricing.id in (%s) order by service_area_pricing.id desc;
Param: (105365,)
select supply_demand_pricing.supply_fleet_id, supply_demand_pricing.demand_fleet_id, json, version, login_id from supply_demand_pricing inner join fleet_supply_demand on fleet_supply_demand.pricing_id=supply_demand_pricing.id where fleet_supply_demand.supply_fleet_id=%s and fleet_supply_demand.demand_fleet_id=%s;
Param: (15, 15)
select country from lat_lng_4_country where (lat,lng) in ((24,98), (24.44,98.56), (24.44,98.5672)) ;
Param: ()
2024-01-19 07:34:25,463 - elife_log - INFO - from and to address is in different country!
2024-01-19 07:34:25,463 - elife_log - INFO - calculate_price_for_post price: []
2024-01-19 07:34:25,505 - elife_log - INFO - start upload quote to s3
2024-01-19 07:34:25,693 - elife_log - INFO - 2024-01/2d8b6fb672a7412c92d6f09e2842477f-1705649665-k4h8cx92-req.json upload status: 200
2024-01-19 07:34:25,702 - elife_log - INFO - upload stats: [True]
2024-01-19 07:34:25,702 - elife_log - INFO - upload result True
2024-01-19 07:34:25,722 - elife_log - INFO - Ride MySQL connection is closed
2024-01-19 07:34:25,722 - elife_log - INFO - 
{
    "statusCode": 200,
    "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Expose-Headers": "Date"
    },
    "body": "{\"fleets\": [], \"request_id\": \"2d8b6fb672a7412c92d6f09e2842477f\"}"
}

END RequestId: 36838aaf-0190-47c9-8d3e-198db56069b4
REPORT RequestId: 36838aaf-0190-47c9-8d3e-198db56069b4	Duration: 392.74 ms	Billed Duration: 393 ms	Memory Size: 128 MB	Max Memory Used: 105 MB	